<div>
    <ejs-dialog #AddGroupDialog id='dialog' header='{{btnTitle}}' width='400px' (open)="dialogOpen()" (close)="dialogClose()"
        [visible]='isOpen' showCloseIcon='true' isModal='true'>
        <ng-template #content>

            <form name="form" [formGroup]="newGroupForm" class="NewGroupLayout" novalidate>

               
                 
                        <div fxLayout="column" fxLayoutAlign="start stretch" fxLayoutGap="20">
                                <div class="popup-body-layout">
                        <div class='form-group' *ngIf="existing_Group">
                            <label class="label">Choose a Group</label>

                            <div class="user-input eixting_Group_css">
                                <ejs-dropdownlist  [allowFiltering]='true' #GroupTo class="dropdownInPopup" [popupWidth]="675" #Contactsdropdown [dataSource]='this.data' [fields]='fields'
                                    (select)='selectGroup($event)' (close)="onClose($event)"   ></ejs-dropdownlist>
                            </div>
                        </div>
                        <div class="form-group" *ngIf="!existing_Group">
                            <label class="label">Group Name</label>
                            <div class="textbox-layout">
                                    <ejs-textbox formControlName="name"></ejs-textbox>
                                <!-- <input #GroupName type="text" class='groupname' placeholder="Group Name"  /> -->
                            </div>
                        </div>
                        <div class="form-group" *ngIf="openmembers">
                            <label class="labels">
                                Members
                            </label>
                            <div class="user-groupinput">

                                <ejs-multiselect #template class="select-multipleContact" cssClass="memberSelectionPopup" id="multi-template" [popupWidth]="674"
                                    [popupHeight]="160" formControlName="userOrganisationMappingId" [dataSource]="contacts" [fields]="multifield"
                                    [placeholder]="placeholder" fxLayoutGap="10px" [closePopupOnSelect]="false" [mode]='box' [allowFiltering]='true' (close)="onCloseMultiselect($event)"> 

                                    <ng-template #itemTemplate let-data>
                                        <div class="memeber-Data" fxLayout="row">
                                            <div class="multiprofileimg">
                                                <span>
                                                    <img class="e-userimg profile-imgs" *ngIf="data.imageURL==null ||  data.imageURL==''" src="assets/images/user.png" alt="{{data.id}}"
                                                    />

                                                    <img class="e-userimg profile-imgs" *ngIf="data.imageURL" src="{{environmentUrl}}{{data.imageURL}}" alt="{{data.id}}" />
                                                </span>
                                            </div>
                                            <div class="conttact-group-add" fxLayoutGap="10px">
                                                <div class="multiename">{{data.fullName}}</div>
                                                <div class="multijob">{{data.emailAddress}}</div>
                                            </div>
                                        </div>
                                    </ng-template>
                                </ejs-multiselect>
                            </div>
                        </div>
                        <div *ngIf="!existing_Group">
                            <label class="label">
                                Description
                            </label>
                            <div class="">
                                <textarea #Description formControlName="description" fxLayoutAlign="start stretch" class='form-control textarea responsive-textarea contactgrouptextarea'
                                    rows='2'></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="popup-footer-layout">
                        <div fxFlex fxLayout="column" fxLayoutAlign="center center">
                            <button class="popup-footer-button" id="btn" [disabled]="!newGroupForm.valid" ejs-button (click)="SubmitGroup()"> Save </button>
                        </div>
                    </div>
                </div>
            </form>
        </ng-template>
    </ejs-dialog>
</div>